(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{148:function(t,i){!function(){var t=window.jQuery,i="mathquill-block-id",n=Math.min,s=Math.max;function r(){}var e=[].slice;function o(t){var i=t.length-1;return function(){var n=e.call(arguments,0,i),s=e.call(arguments,i);return t.apply(this,n.concat([s]))}}var h=o((function(t,i){return o((function(n,s){if(t in n)return n[t].apply(n,i.concat(s))}))}));function u(t){return o((function(i,n){"function"!=typeof i&&(i=h(i));return t.call(this,(function(t){return i.apply(t,[t].concat(n))}))}))}function a(t){var i=e.call(arguments,1);return function(){return t.apply(this,i)}}function f(t,i){if(!i)throw new Error("prayer failed: "+t)}var c=function(t,i,n){function s(t){return"object"==typeof t}function r(t){return"function"==typeof t}function e(){}return function t(n,o){function h(){var t=new u;return r(t.init)&&t.init.apply(t,arguments),t}function u(){}void 0===o&&(o=n,n=Object),h.Bare=u;var a,f=e.prototype=n.prototype,c=u.prototype=h.prototype=h.p=new e;return c.constructor=h,h.extend=function(i){return t(h,i)},(h.open=function(t){if(a={},r(t)?a=t.call(h,c,f,h,n):s(t)&&(a=t),s(a))for(var e in a)i.call(a,e)&&(c[e]=a[e]);return r(c.init)||(c.init=n),h})(o)}}(0,{}.hasOwnProperty),l=-1;function m(t){f("a direction was passed",t===l||1===t)}var p=c(t,(function(t){t.insDirOf=function(t,i){return t===l?this.insertBefore(i.first()):this.insertAfter(i.last())},t.insAtDirEnd=function(t,i){return t===l?this.prependTo(i):this.appendTo(i)}})),v=c((function(t){t.parent=0,t[l]=0,t[1]=0,t.init=function(t,i,n){this.parent=t,this[l]=i,this[1]=n},this.copy=function(t){return v(t.parent,t[l],t[1])}})),d=c((function(t){t[l]=0,t[1]=0,t.parent=0;var i=0;this.byId={},t.init=function(){this.id=i+=1,d.byId[this.id]=this,this.ends={},this.ends[l]=0,this.ends[1]=0},t.dispose=function(){delete d.byId[this.id]},t.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},t.jQ=p(),t.jQadd=function(t){return this.jQ=this.jQ.add(t)},t.jQize=function(t){t=p(t||this.html());function i(t){if(t.getAttribute){var n=t.getAttribute("mathquill-command-id"),s=t.getAttribute("mathquill-block-id");n&&d.byId[n].jQadd(t),s&&d.byId[s].jQadd(t)}for(t=t.firstChild;t;t=t.nextSibling)i(t)}for(var n=0;n<t.length;n+=1)i(t[n]);return t},t.createDir=function(t,i){m(t);return this.jQize(),this.jQ.insDirOf(t,i.jQ),i[t]=this.adopt(i.parent,i[l],i[1]),this},t.createLeftOf=function(t){return this.createDir(l,t)},t.selectChildren=function(t,i){return x(t,i)},t.bubble=u((function(t){for(var i=this;i;i=i.parent){if(!1===t(i))break}return this})),t.postOrder=u((function(t){return function i(n){n.eachChild(i),t(n)}(this),this})),t.isEmpty=function(){return 0===this.ends[l]&&0===this.ends[1]},t.children=function(){return g(this.ends[l],this.ends[1])},t.eachChild=function(){var t=this.children();return t.each.apply(t,arguments),this},t.foldChildren=function(t,i){return this.children().fold(t,i)},t.withDirAdopt=function(t,i,n,s){return g(this,this).withDirAdopt(t,i,n,s),this},t.adopt=function(t,i,n){return g(this,this).adopt(t,i,n),this},t.disown=function(){return g(this,this).disown(),this},t.remove=function(){return this.jQ.remove(),this.postOrder("dispose"),this.disown()}}));function q(t,i,n){f("a parent is always present",t),f("leftward is properly set up",i?i[1]===n&&i.parent===t:t.ends[l]===n),f("rightward is properly set up",n?n[l]===i&&n.parent===t:t.ends[1]===i)}var g=c((function(t){t.init=function(t,i,n){if(void 0===n&&(n=l),m(n),f("no half-empty fragments",!t==!i),this.ends={},t){f("withDir is passed to Fragment",t instanceof d),f("oppDir is passed to Fragment",i instanceof d),f("withDir and oppDir have the same parent",t.parent===i.parent),this.ends[n]=t,this.ends[-n]=i;var s=this.fold([],(function(t,i){return t.push.apply(t,i.jQ.get()),t}));this.jQ=this.jQ.add(s)}},t.jQ=p(),t.withDirAdopt=function(t,i,n,s){return t===l?this.adopt(i,n,s):this.adopt(i,s,n)},t.adopt=function(t,i,n){q(t,i,n);this.disowned=!1;var s=this.ends[l];if(!s)return this;var r=this.ends[1];return i||(t.ends[l]=s),n?n[l]=r:t.ends[1]=r,this.ends[1][1]=n,this.each((function(n){n[l]=i,n.parent=t,i&&(i[1]=n),i=n})),this},t.disown=function(){var t=this.ends[l];if(!t||this.disowned)return this;this.disowned=!0;var i=this.ends[1],n=t.parent;return q(n,t[l],t),q(n,i,i[1]),t[l]?t[l][1]=i[1]:n.ends[l]=i[1],i[1]?i[1][l]=t[l]:n.ends[1]=t[l],this},t.remove=function(){return this.jQ.remove(),this.each("postOrder","dispose"),this.disown()},t.each=u((function(t){var i=this.ends[l];if(!i)return this;for(;i!==this.ends[1][1];i=i[1]){if(!1===t(i))break}return this})),t.fold=function(t,i){return this.each((function(n){t=i.call(this,t,n)})),t}})),b={},w={},k=c(v,(function(t){t.init=function(t,i){this.parent=t,this.options=i;var n=this.jQ=this._jQ=p('<span class="mq-cursor">&#8203;</span>');this.blink=function(){n.toggleClass("mq-blink")},this.upDownCache={}},t.show=function(){return this.jQ=this._jQ.removeClass("mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[1]?this.selection&&this.selection.ends[l][l]===this[l]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[1].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},t.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=p(),this},t.withDirInsertAt=function(t,i,n,s){var r=this.parent;this.parent=i,this[t]=n,this[-t]=s,r!==i&&r.blur&&r.blur(this)},t.insDirOf=function(t,i){return m(t),this.jQ.insDirOf(t,i.jQ),this.withDirInsertAt(t,i.parent,i[t],i),this.parent.jQ.addClass("mq-hasCursor"),this},t.insLeftOf=function(t){return this.insDirOf(l,t)},t.insRightOf=function(t){return this.insDirOf(1,t)},t.insAtDirEnd=function(t,i){return m(t),this.jQ.insAtDirEnd(t,i.jQ),this.withDirInsertAt(t,i,0,i.ends[t]),i.focus(),this},t.insAtLeftEnd=function(t){return this.insAtDirEnd(l,t)},t.insAtRightEnd=function(t){return this.insAtDirEnd(1,t)},t.jumpUpDown=function(t,i){this.upDownCache[t.id]=v.copy(this);var n=this.upDownCache[i.id];if(n)n[1]?this.insLeftOf(n[1]):this.insAtRightEnd(n.parent);else{var s=this.offset().left;i.seek(s,this)}},t.offset=function(){var t=this.jQ.removeClass("mq-cursor").offset();return this.jQ.addClass("mq-cursor"),t},t.unwrapGramp=function(){var t=this.parent.parent,i=t.parent,n=t[1],s=t[l];if(t.disown().eachChild((function(r){r.isEmpty()||(r.children().adopt(i,s,n).each((function(i){i.jQ.insertBefore(t.jQ.first())})),s=r.ends[1])})),!this[1])if(this[l])this[1]=this[l][1];else for(;!this[1];){if(this.parent=this.parent[1],!this.parent){this[1]=t[1],this.parent=i;break}this[1]=this.parent.ends[l]}this[1]?this.insLeftOf(this[1]):this.insAtRightEnd(i),t.jQ.remove(),t[l].siblingDeleted&&t[l].siblingDeleted(this.options,1),t[1].siblingDeleted&&t[1].siblingDeleted(this.options,l)},t.startSelection=function(){for(var t=this.anticursor=v.copy(this),i=t.ancestors={},n=t;n.parent;n=n.parent)i[n.parent.id]=n},t.endSelection=function(){delete this.anticursor},t.select=function(){var t=this.anticursor;if(this[l]===t[l]&&this.parent===t.parent)return!1;for(var i=this;i.parent;i=i.parent)if(i.parent.id in t.ancestors){var n=i.parent;break}f("cursor and anticursor in the same tree",n);var s,r,e=t.ancestors[n.id],o=1;if(i[l]!==e)for(var h=i;h;h=h[1])if(h[1]===e[1]){o=l,s=i,r=e;break}return 1===o&&(s=e,r=i),s instanceof v&&(s=s[1]),r instanceof v&&(r=r[l]),this.hide().selection=n.selectChildren(s,r),this.insDirOf(o,this.selection.ends[o]),this.selectionChanged(),!0},t.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},t.deleteSelection=function(){this.selection&&(this[l]=this.selection.ends[l][l],this[1]=this.selection.ends[1][1],this.selection.remove(),this.selectionChanged(),delete this.selection)},t.replaceSelection=function(){var t=this.selection;return t&&(this[l]=t.ends[l][l],this[1]=t.ends[1][1],delete this.selection),t}})),x=c(g,(function(t,i){t.init=function(){i.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="mq-selection"></span>').parent()},t.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),i.adopt.apply(this,arguments)},t.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},t.join=function(t){return this.fold("",(function(i,n){return i+n[t]()}))}})),y=c((function(t){t.init=function(t,i,n){this.id=t.id,this.data={},this.root=t,this.container=i,this.options=n,t.controller=this,this.cursor=t.cursor=k(t,n)},t.handle=function(t,i){var n=this.options.handlers;if(n&&n.fns[t]){var s=n.APIClasses[this.KIND_OF_MQ](this);i===l||1===i?n.fns[t](i,s):n.fns[t](s)}};var i=[];this.onNotify=function(t){i.push(t)},t.notify=function(){for(var t=0;t<i.length;t+=1)i[t].apply(this.cursor,arguments);return this}})),S={},$=c(),M={},z=c(),C={};function O(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function T(t){return O(),Dt(t)}T.prototype=z.p,T.interfaceVersion=function(t){if(1!==t)throw"Only interface version 1 supported. You specified: "+t;return(O=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')})(),T},T.getInterface=E;var I=E.MIN=1,D=E.MAX=2;function E(n){if(!(I<=n&&n<=D))throw"Only interface versions between "+I+" and "+D+" supported. You specified: "+n;function s(t){if(!t||!t.nodeType)return null;var n=p(t).children(".mq-root-block").attr(i),s=n&&d.byId[n].controller;return s?e[s.KIND_OF_MQ](s):null}var e={};function o(t,i){for(var n in i&&i.handlers&&(i.handlers={fns:i.handlers,APIClasses:e}),i)if(i.hasOwnProperty(n)){var s=i[n],r=M[n];t[n]=r?r(s):s}}s.L=l,s.R=1,s.config=function(t){return o($.p,t),this},s.registerEmbed=function(t,i){if(!/^[a-z][a-z0-9]*$/i.test(t))throw"Embed name must start with letter and be only letters and digits";C[t]=i};var h=e.AbstractMathQuill=c(z,(function(t){t.init=function(t){this.__controller=t,this.__options=t.options,this.id=t.id,this.data=t.data},t.__mathquillify=function(t){var n=this.__controller,s=n.root,r=n.container;n.createTextarea();var e=r.addClass(t).contents().detach();s.jQ=p('<span class="mq-root-block"/>').attr(i,s.id).appendTo(r),this.latex(e.text()),this.revert=function(){return r.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(e)}},t.config=function(t){return o(this.__options,t),this},t.el=function(){return this.__controller.container[0]},t.text=function(){return this.__controller.exportText()},t.latex=function(t){return arguments.length>0?(this.__controller.renderLatexMath(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},t.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},t.reflow=function(){return this.__controller.root.postOrder("reflow"),this}}));for(var u in s.prototype=h.prototype,e.EditableField=c(h,(function(i,n){i.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},i.focus=function(){return this.__controller.textarea.focus(),this},i.blur=function(){return this.__controller.textarea.blur(),this},i.write=function(t){return this.__controller.writeLatex(t),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},i.cmd=function(t){var i=this.__controller.notify(),n=i.cursor;if(/^\\[a-z]+$/i.test(t)){t=t.slice(1);var s=b[t];s&&(t=s(t),n.selection&&t.replaces(n.replaceSelection()),t.createLeftOf(n.show()),this.__controller.scrollHoriz())}else n.parent.write(n,t);return i.blurred&&n.hide().parent.blur(),this},i.select=function(){var t=this.__controller;for(t.notify("move").cursor.insAtRightEnd(t.root);t.cursor[l];)t.selectLeft();return this},i.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},i.moveToDirEnd=function(t){return this.__controller.notify("move").cursor.insAtDirEnd(t,this.__controller.root),this},i.moveToLeftEnd=function(){return this.moveToDirEnd(l)},i.moveToRightEnd=function(){return this.moveToDirEnd(1)},i.keystroke=function(t){t=t.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var i=0;i<t.length;i+=1)this.__controller.keystroke(t[i],{preventDefault:r});return this},i.typedText=function(t){for(var i=0;i<t.length;i+=1)this.__controller.typedText(t.charAt(i));return this},i.dropEmbedded=function(t,i,n){var s=t-p(window).scrollLeft(),r=i-p(window).scrollTop(),e=document.elementFromPoint(s,r);this.__controller.seek(p(e),t,i),It().setOptions(n).createLeftOf(this.__controller.cursor)},i.clickAt=function(i,n,s){s=s||document.elementFromPoint(i,n);var r=this.__controller,e=r.root;return t.contains(e.jQ[0],s)||(s=e.jQ[0]),r.seek(p(s),i+pageXOffset,n+pageYOffset),r.blurred&&this.focus(),this},i.ignoreNextMousedown=function(t){return this.__controller.cursor.options.ignoreNextMousedown=t,this}})),s.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},s.EditableField.prototype=e.EditableField.prototype,S)!function(t,i){var r=e[t]=i(e);s[t]=function(i,e){var o=s(i);if(o instanceof r||!i||!i.nodeType)return o;var h=y(r.RootBlock(),p(i),$());return h.KIND_OF_MQ=t,r(h).__mathquillify(e,n)},s[t].prototype=r.prototype}(u,S[u]);return s}T.noConflict=function(){return window.MathQuill=A,T};var A=window.MathQuill;function L(t){for(var i="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),n=0;n<i.length;n+=1)!function(i){t[i]=function(t){this.controller.handle(i,t)}}(i[n]);t.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}window.MathQuill=T;var F,Q=c((function(t,i,n){function s(t,i){throw"Parse Error: "+i+" at "+(t=t?"'"+t+"'":"EOF")}t.init=function(t){this._=t},t.parse=function(t){return this.skip(o)._(""+t,(function(t,i){return i}),s)},t.or=function(t){f("or is passed a parser",t instanceof n);var i=this;return n((function(n,s,r){return i._(n,s,(function(i){return t._(n,s,r)}))}))},t.then=function(t){var i=this;return n((function(s,r,e){return i._(s,(function(i,s){var o=t instanceof n?t:t(s);return f("a parser is returned",o instanceof n),o._(i,r,e)}),e)}))},t.many=function(){var t=this;return n((function(i,n,s){for(var r=[];t._(i,e,o););return n(i,r);function e(t,n){return i=t,r.push(n),!0}function o(){return!1}}))},t.times=function(t,i){arguments.length<2&&(i=t);var s=this;return n((function(n,r,e){for(var o,h=[],u=!0,a=0;a<t;a+=1)if(!(u=s._(n,f,c)))return e(n,o);for(;a<i&&u;a+=1)u=s._(n,f,l);return r(n,h);function f(t,i){return h.push(i),n=t,!0}function c(t,i){return o=i,n=t,!1}function l(t,i){return!1}}))},t.result=function(t){return this.then(e(t))},t.atMost=function(t){return this.times(0,t)},t.atLeast=function(t){var i=this;return i.times(t).then((function(t){return i.many().map((function(i){return t.concat(i)}))}))},t.map=function(t){return this.then((function(i){return e(t(i))}))},t.skip=function(t){return this.then((function(i){return t.result(i)}))};this.string=function(t){var i=t.length,s="expected '"+t+"'";return n((function(n,r,e){var o=n.slice(0,i);return o===t?r(n.slice(i),o):e(n,s)}))};var r=this.regex=function(t){f("regexp parser is anchored","^"===t.toString().charAt(1));var i="expected "+t;return n((function(n,s,r){var e=t.exec(n);if(e){var o=e[0];return s(n.slice(o.length),o)}return r(n,i)}))},e=n.succeed=function(t){return n((function(i,n){return n(i,t)}))},o=(n.fail=function(t){return n((function(i,n,s){return s(i,t)}))},n.letter=r(/^[a-z]/i),n.letters=r(/^[a-z]*/i),n.digit=r(/^[0-9]/),n.digits=r(/^[0-9]*/),n.whitespace=r(/^\s+/),n.optWhitespace=r(/^\s*/),n.any=n((function(t,i,n){return t?i(t.slice(1),t.charAt(0)):n(t,"expected any character")})),n.all=n((function(t,i,n){return i("",t)})),n.eof=n((function(t,i,n){return t?n(t,"expected EOF"):i(t,t)})))})),R=(F={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},function(i,n){var s,e=null,o=null,h=t(i),u=t(n.container||h),a=r;function f(t){a=t,clearTimeout(s),s=setTimeout(t)}u.bind("keydown keypress input keyup focusout paste",(function(t){a(t)}));var c=!1;function l(){n.keystroke(function(t){var i,n=t.which||t.keyCode,s=F[n],r=[];return t.ctrlKey&&r.push("Ctrl"),t.originalEvent&&t.originalEvent.metaKey&&r.push("Meta"),t.altKey&&r.push("Alt"),t.shiftKey&&r.push("Shift"),i=s||String.fromCharCode(n),r.length||s?(r.push(i),r.join("-")):i}(e),e)}function m(){if(!("selectionStart"in(t=h[0]))||t.selectionStart===t.selectionEnd){var t,i=h.val();1===i.length?(h.val(""),n.typedText(i)):i&&h[0].select&&h[0].select()}}function p(){var t=h.val();h.val(""),t&&n.paste(t)}return u.bind({keydown:function(t){e=t,o=null,c&&f((function(t){t&&"focusout"===t.type||!h[0].select||h[0].select(),a=r,clearTimeout(s)})),l()},keypress:function(t){e&&o&&l(),o=t,f(m)},focusout:function(){e=o=null},paste:function(t){h.focus(),f(p)}}),{select:function(t){a(),a=r,clearTimeout(s),h.val(t),t&&h[0].select&&h[0].select(),c=!!t}}});y.open((function(t,i){t.exportText=function(){return this.root.foldChildren("",(function(t,i){return t+i.text()}))}})),y.open((function(t){t.focusBlurEvents=function(){var t,i=this,n=i.root,s=i.cursor;function r(){clearTimeout(t),s.selection&&s.selection.jQ.addClass("mq-blur"),e()}function e(){s.hide().parent.blur(),i.container.removeClass("mq-focused"),p(window).off("blur",r)}i.textarea.focus((function(){i.blurred=!1,clearTimeout(t),i.container.addClass("mq-focused"),s.parent||s.insAtRightEnd(n),s.selection?(s.selection.jQ.removeClass("mq-blur"),i.selectionChanged()):s.show()})).blur((function(){i.blurred=!0,t=setTimeout((function(){n.postOrder("intentionalBlur"),s.clearSelection().endSelection(),e()})),p(window).on("blur",r)})),i.blurred=!0,s.hide().parent.blur()}})),y.open((function(t){t.keystroke=function(t,i){this.cursor.parent.keystroke(t,i,this)}})),d.open((function(t){t.keystroke=function(t,i,n){var s=n.cursor;switch(t){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(l);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(1,t,i);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(l,t,i);case"End":n.notify("move").cursor.insAtRightEnd(s.parent);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root);break;case"Shift-End":for(;s[1];)n.selectRight();break;case"Ctrl-Shift-End":for(;s[1]||s.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(s.parent);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root);break;case"Shift-Home":for(;s[l];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;s[l]||s.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(s[l])for(;s[l];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(s[1])for(;s[1];)n.selectRight();else n.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(1);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);s[l];)n.selectLeft();break;default:return}i.preventDefault(),n.scrollHoriz()},t.moveOutOf=t.moveTowards=t.deleteOutOf=t.deleteTowards=t.unselectInto=t.selectOutOf=t.selectTowards=function(){f("overridden or never called on this node")}})),y.open((function(t){function i(t,i){var n=t.notify("upDown").cursor,s=i+"Into",r=i+"OutOf";return n[1][s]?n.insAtLeftEnd(n[1][s]):n[l][s]?n.insAtRightEnd(n[l][s]):n.parent.bubble((function(t){var i=t[r];if(i&&("function"==typeof i&&(i=t[r](n)),i instanceof d&&n.jumpUpDown(t,i),!0!==i))return!1})),t}this.onNotify((function(t){"move"!==t&&"upDown"!==t||this.show().clearSelection()})),t.escapeDir=function(t,i,n){m(t);var s=this.cursor;if(s.parent!==this.root&&n.preventDefault(),s.parent!==this.root)return s.parent.moveOutOf(t,s),this.notify("move")},M.leftRightIntoCmdGoes=function(t){if(t&&"up"!==t&&"down"!==t)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+t+'"';return t},t.moveDir=function(t){m(t);var i=this.cursor,n=i.options.leftRightIntoCmdGoes;return i.selection?i.insDirOf(t,i.selection.ends[t]):i[t]?i[t].moveTowards(t,i,n):i.parent.moveOutOf(t,i,n),this.notify("move")},t.moveLeft=function(){return this.moveDir(l)},t.moveRight=function(){return this.moveDir(1)},t.moveUp=function(){return i(this,"up")},t.moveDown=function(){return i(this,"down")},this.onNotify((function(t){"upDown"!==t&&(this.upDownCache={})})),this.onNotify((function(t){"edit"===t&&this.show().deleteSelection()})),t.deleteDir=function(t){m(t);var i=this.cursor,n=i.selection;return this.notify("edit"),n||(i[t]?i[t].deleteTowards(t,i):i.parent.deleteOutOf(t,i)),i[l].siblingDeleted&&i[l].siblingDeleted(i.options,1),i[1].siblingDeleted&&i[1].siblingDeleted(i.options,l),i.parent.bubble("reflow"),this},t.ctrlDeleteDir=function(t){m(t);var i=this.cursor;return!i[l]||i.selection?ctrlr.deleteDir():(this.notify("edit"),g(i.parent.ends[l],i[l]).remove(),i.insAtDirEnd(l,i.parent),i[l].siblingDeleted&&i[l].siblingDeleted(i.options,1),i[1].siblingDeleted&&i[1].siblingDeleted(i.options,l),i.parent.bubble("reflow"),this)},t.backspace=function(){return this.deleteDir(l)},t.deleteForward=function(){return this.deleteDir(1)},this.onNotify((function(t){"select"!==t&&this.endSelection()})),t.selectDir=function(t){var i=this.notify("select").cursor,n=i.selection;m(t),i.anticursor||i.startSelection();var s=i[t];s?n&&n.ends[t]===s&&i.anticursor[-t]!==s?s.unselectInto(t,i):s.selectTowards(t,i):i.parent.selectOutOf(t,i),i.clearSelection(),i.select()||i.show()},t.selectLeft=function(){return this.selectDir(l)},t.selectRight=function(){return this.selectDir(1)}}));var _=function(){function t(t){for(var i=t[0]||Y(),n=1;n<t.length;n+=1)t[n].children().adopt(i,i.ends[1],0);return i}var i=Q.string,n=Q.regex,s=Q.letter,r=Q.any,e=Q.optWhitespace,o=Q.succeed,h=Q.fail,u=s.map((function(t){return tt(t)})),a=n(/^[^${}\\_^]/).map((function(t){return P(t)})),f=n(/^[^\\a-eg-zA-Z]/).or(i("\\").then(n(/^[a-z]+/i).or(n(/^\s+/).result(" ")).or(r))).then((function(t){var i=b[t];return i?i(t).parser():h("unknown command: \\"+t)})).or(u).or(a),c=i("{").then((function(){return m})).skip(i("}")),l=e.then(c.or(f.map((function(t){var i=Y();return t.adopt(i,0,0),i})))),m=l.many().map(t).skip(e),p=i("[").then(l.then((function(t){return"]"!==t.join("latex")?o(t):h()})).many().map(t).skip(e)).skip(i("]")),v=m;return v.block=l,v.optBlock=p,v}();y.open((function(t,i){t.exportLatex=function(){return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},t.writeLatex=function(t){var i=this.notify("edit").cursor,n=Q.all,s=Q.eof,r=_.skip(s).or(n.result(!1)).parse(t);r&&!r.isEmpty()&&(r.children().adopt(i.parent,i[l],i[1]),r.jQize().insertBefore(i.jQ),i[l]=r.ends[1],r.finalizeInsert(i.options,i),r.ends[1][1].siblingCreated&&r.ends[1][1].siblingCreated(i.options,l),r.ends[l][l].siblingCreated&&r.ends[l][l].siblingCreated(i.options,1),i.parent.bubble("reflow"));return this},t.renderLatexMath=function(t){var i=this.root,n=this.cursor,s=Q.all,r=Q.eof,e=_.skip(r).or(s.result(!1)).parse(t);i.eachChild("postOrder","dispose"),i.ends[l]=i.ends[1]=0,e&&e.children().adopt(i,0,0);var o=i.jQ;if(e){var h=e.join("html");o.html(h),i.jQize(o.children()),i.finalizeInsert(n.options)}else o.empty();delete n.selection,n.insAtRightEnd(i)},t.renderLatexText=function(t){var i=this.root,n=this.cursor;i.jQ.children().slice(1).remove(),i.eachChild("postOrder","dispose"),i.ends[l]=i.ends[1]=0,delete n.selection,n.show().insAtRightEnd(i);var s=Q.regex,r=Q.string,e=Q.eof,o=Q.all,h=r("$").then(_).skip(r("$").or(e)).map((function(t){var i=X(n);i.createBlocks();var s=i.ends[l];return t.children().adopt(s,0,0),i})),u=r("\\$").result("$").or(s(/^[^$]/)).map(P),a=h.or(u).many().skip(e).or(o.result(!1)).parse(t);if(a){for(var f=0;f<a.length;f+=1)a[f].adopt(i,i.ends[1],0);i.jQize().appendTo(i.jQ),i.finalizeInsert(n.options)}}})),y.open((function(t){$.p.ignoreNextMousedown=r,t.delegateMouseEvents=function(){var t=this.root.jQ;this.container.bind("mousedown.mathquill",(function(n){var s,e=p(n.target).closest(".mq-root-block"),o=d.byId[e.attr(i)||t.attr(i)].controller,h=o.cursor,u=h.blink,a=o.textareaSpan,f=o.textarea;(n.preventDefault(),n.target.unselectable=!0,h.options.ignoreNextMousedown(n))||(h.options.ignoreNextMousedown=r,o.blurred&&(o.editable||e.prepend(a),f.focus()),h.blink=r,o.seek(p(n.target),n.pageX,n.pageY).cursor.startSelection(),e.mousemove(c),p(n.target.ownerDocument).mousemove(l).mouseup((function t(i){h.blink=u,h.selection||(o.editable?h.show():a.detach()),e.unbind("mousemove",c),p(i.target.ownerDocument).unbind("mousemove",l).unbind("mouseup",t)})));function c(t){s=p(t.target)}function l(t){h.anticursor||h.startSelection(),o.seek(s,t.pageX,t.pageY).cursor.select(),s=void 0}}))}})),y.open((function(t){t.seek=function(t,n,s){var r=this.notify("select").cursor;if(t){var e=t.attr(i)||t.attr("mathquill-command-id");if(!e){var o=t.parent();e=o.attr(i)||o.attr("mathquill-command-id")}}var h=e?d.byId[e]:this.root;return f("nodeId is the id of some Node that exists",h),r.clearSelection().show(),h.seek(n,r),this.scrollHoriz(),this}})),y.open((function(t){t.scrollHoriz=function(){var t=this.cursor,i=t.selection,n=this.root.jQ[0].getBoundingClientRect();if(i){var s=i.jQ[0].getBoundingClientRect(),r=s.left-(n.left+20),e=s.right-(n.right-20);if(i.ends[l]===t[1])if(r<0)h=r;else{if(!(e>0))return;if(s.left-e<n.left+20)h=r;else h=e}else if(e>0)h=e;else{if(!(r<0))return;if(s.right-r>n.right-20)h=e;else h=r}}else{var o=t.jQ[0].getBoundingClientRect().left;if(o>n.right-20)var h=o-(n.right-20);else{if(!(o<n.left+20))return;var h=o-(n.left+20)}}this.root.jQ.stop().animate({scrollLeft:"+="+h},100)}})),y.open((function(t){$.p.substituteTextarea=function(){return p("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]},t.createTextarea=function(){var t=this.textareaSpan=p('<span class="mq-textarea"></span>'),i=this.options.substituteTextarea();if(!i.nodeType)throw"substituteTextarea() must return a DOM element, got "+i;i=this.textarea=p(i).appendTo(t);var n=this;n.cursor.selectionChanged=function(){n.selectionChanged()},n.container.bind("copy",(function(){n.setTextareaSelection()}))},t.selectionChanged=function(){var t=this;vt(t.container[0]),void 0===t.textareaSelectionTimeout&&(t.textareaSelectionTimeout=setTimeout((function(){t.setTextareaSelection()})))},t.setTextareaSelection=function(){this.textareaSelectionTimeout=void 0;var t="";this.cursor.selection&&(t=this.cursor.selection.join("latex"),this.options.statelessClipboard&&(t="$"+t+"$")),this.selectFn(t)},t.staticMathTextareaEvents=function(){var t=this,i=(t.root,t.cursor),n=t.textarea,s=t.textareaSpan;function r(){s.detach(),t.blurred=!0}this.container.prepend('<span class="mq-selectable">$'+t.exportLatex()+"$</span>"),t.blurred=!0,n.bind("cut paste",!1).focus((function(){t.blurred=!1})).blur((function(){i.selection&&i.selection.clear(),setTimeout(r)})),t.selectFn=function(t){n.val(t),t&&n.select()}},t.editablesTextareaEvents=function(){var t=this,i=(t.root,t.cursor),n=t.textarea,s=t.textareaSpan,r=R(n,this);this.selectFn=function(t){r.select(t)},this.container.prepend(s).on("cut",(function(n){i.selection&&setTimeout((function(){t.notify("edit"),i.parent.bubble("reflow")}))})),this.focusBlurEvents()},t.typedText=function(t){if("\n"===t)return this.handle("enter");var i=this.notify().cursor;i.parent.write(i,t),this.scrollHoriz()},t.paste=function(t){this.options.statelessClipboard&&(t="$"===t.slice(0,1)&&"$"===t.slice(-1)?t.slice(1,-1):"\\text{"+t+"}"),this.writeLatex(t).cursor.show()}}));var U=c(d,(function(t,i){t.finalizeInsert=function(t,i){this.postOrder("finalizeTree",t),this.postOrder("contactWeld",i),this.postOrder("blur"),this.postOrder("reflow"),this[1].siblingCreated&&this[1].siblingCreated(t,l),this[l].siblingCreated&&this[l].siblingCreated(t,1),this.bubble("reflow")}})),j=c(U,(function(t,i){t.init=function(t,n,s){i.init.call(this),this.ctrlSeq||(this.ctrlSeq=t),n&&(this.htmlTemplate=n),s&&(this.textTemplate=s)},t.replaces=function(t){t.disown(),this.replacedFragment=t},t.isEmpty=function(){return this.foldChildren(!0,(function(t,i){return t&&i.isEmpty()}))},t.parser=function(){var t=_.block,i=this;return t.times(i.numBlocks()).map((function(t){i.blocks=t;for(var n=0;n<t.length;n+=1)t[n].adopt(i,i.ends[1],0);return i}))},t.createLeftOf=function(t){var n=this.replacedFragment;this.createBlocks(),i.createLeftOf.call(this,t),n&&(n.adopt(this.ends[l],0,0),n.jQ.appendTo(this.ends[l].jQ)),this.finalizeInsert(t.options),this.placeCursor(t)},t.createBlocks=function(){for(var t=this.numBlocks(),i=this.blocks=Array(t),n=0;n<t;n+=1){(i[n]=Y()).adopt(this,this.ends[1],0)}},t.placeCursor=function(t){t.insAtRightEnd(this.foldChildren(this.ends[l],(function(t,i){return t.isEmpty()?t:i})))},t.moveTowards=function(t,i,n){var s=n&&this[n+"Into"];i.insAtDirEnd(-t,s||this.ends[-t])},t.deleteTowards=function(t,i){this.isEmpty()?i[t]=this.remove()[t]:this.moveTowards(t,i,null)},t.selectTowards=function(t,i){i[-t]=this,i[t]=this[t]},t.selectChildren=function(){return x(this,this)},t.unselectInto=function(t,i){i.insAtDirEnd(-t,i.anticursor.ancestors[this.id])},t.seek=function(t,i){function n(t){var i={};return i[l]=t.jQ.offset().left,i[1]=i[l]+t.jQ.outerWidth(),i}var s=this,r=n(s);if(t<r[l])return i.insLeftOf(s);if(t>r[1])return i.insRightOf(s);var e=r[l];s.eachChild((function(o){var h=n(o);return t<h[l]?(t-e<h[l]-t?o[l]?i.insAtRightEnd(o[l]):i.insLeftOf(s):i.insAtLeftEnd(o),!1):t>h[1]?void(o[1]?e=h[1]:r[1]-t<t-h[1]?i.insRightOf(s):i.insAtRightEnd(o)):(o.seek(t,i),!1)}))},t.numBlocks=function(){var t=this.htmlTemplate.match(/&\d+/g);return t?t.length:0},t.html=function(){var t=this.blocks,i=" mathquill-command-id="+this.id,n=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);f("no unmatched angle brackets",n.join("")===this.htmlTemplate);for(var s=0,r=n[0];r;r=n[s+=1])if("/>"===r.slice(-2))n[s]=r.slice(0,-2)+i+"/>";else if("<"===r.charAt(0)){f("not an unmatched top-level close tag","/"!==r.charAt(1)),n[s]=r.slice(0,-1)+i+">";var e=1;do{f("no missing close tags",r=n[s+=1]),"</"===r.slice(0,2)?e-=1:"<"===r.charAt(0)&&"/>"!==r.slice(-2)&&(e+=1)}while(e>0)}return n.join("").replace(/>&(\d+)/g,(function(i,n){return" mathquill-block-id="+t[n].id+">"+t[n].join("html")}))},t.latex=function(){return this.foldChildren(this.ctrlSeq,(function(t,i){return t+"{"+(i.latex()||" ")+"}"}))},t.textTemplate=[""],t.text=function(){var t=this,i=0;return t.foldChildren(t.textTemplate[i],(function(n,s){i+=1;var r=s.text();return n&&"("===t.textTemplate[i]&&"("===r[0]&&")"===r.slice(-1)?n+r.slice(1,-1)+t.textTemplate[i]:n+s.text()+(t.textTemplate[i]||"")}))}})),B=c(j,(function(t,i){t.init=function(t,n,s){s||(s=t&&t.length>1?t.slice(1):t),i.init.call(this,t,n,[s])},t.parser=function(){return Q.succeed(this)},t.numBlocks=function(){return 0},t.replaces=function(t){t.remove()},t.createBlocks=r,t.moveTowards=function(t,i){i.jQ.insDirOf(t,this.jQ),i[-t]=this,i[t]=this[t]},t.deleteTowards=function(t,i){i[t]=this.remove()[t]},t.seek=function(t,i){t-this.jQ.offset().left<this.jQ.outerWidth()/2?i.insLeftOf(this):i.insRightOf(this)},t.latex=function(){return this.ctrlSeq},t.text=function(){return this.textTemplate},t.placeCursor=r,t.isEmpty=function(){return!0}})),P=c(B,(function(t,i){t.init=function(t,n){i.init.call(this,t,"<span>"+(n||t)+"</span>")}})),H=c(B,(function(t,i){t.init=function(t,n,s){i.init.call(this,t,'<span class="mq-binary-operator">'+n+"</span>",s)}})),Y=c(U,(function(t,i){t.join=function(t){return this.foldChildren("",(function(i,n){return i+n[t]()}))},t.html=function(){return this.join("html")},t.latex=function(){return this.join("latex")},t.text=function(){return this.ends[l]===this.ends[1]&&0!==this.ends[l]?this.ends[l].text():this.join("text")},t.keystroke=function(t,n,s){return!s.options.spaceBehavesLikeTab||"Spacebar"!==t&&"Shift-Spacebar"!==t?i.keystroke.apply(this,arguments):(n.preventDefault(),void s.escapeDir("Shift-Spacebar"===t?l:1,t,n))},t.moveOutOf=function(t,i,n){!(n&&this.parent[n+"Into"])&&this[t]?i.insAtDirEnd(-t,this[t]):i.insDirOf(t,this.parent)},t.selectOutOf=function(t,i){i.insDirOf(t,this.parent)},t.deleteOutOf=function(t,i){i.unwrapGramp()},t.seek=function(t,i){var n=this.ends[1];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<t)return i.insAtRightEnd(this);if(t<this.ends[l].jQ.offset().left)return i.insAtLeftEnd(this);for(;t<n.jQ.offset().left;)n=n[l];return n.seek(t,i)},t.chToCmd=function(t){var i;return t.match(/^[a-eg-zA-Z]$/)?tt(t):/^\d$/.test(t)?J(t):(i=w[t]||b[t])?i(t):P(t)},t.write=function(t,i){var n=this.chToCmd(i);t.selection&&n.replaces(t.replaceSelection()),n.createLeftOf(t.show())},t.focus=function(){return this.jQ.addClass("mq-hasCursor"),this.jQ.removeClass("mq-empty"),this},t.blur=function(){return this.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.jQ.addClass("mq-empty"),this}}));S.StaticMath=function(t){return c(t.AbstractMathQuill,(function(i,n){this.RootBlock=Y,i.__mathquillify=function(){return n.__mathquillify.call(this,"mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},i.init=function(){n.init.apply(this,arguments),this.__controller.root.postOrder("registerInnerField",this.innerFields=[],t.MathField)},i.latex=function(){var i=n.latex.apply(this,arguments);return arguments.length>0&&this.__controller.root.postOrder("registerInnerField",this.innerFields=[],t.MathField),i}}))};var G=c(Y,L);S.MathField=function(t){return c(t.EditableField,(function(t,i){this.RootBlock=G,t.__mathquillify=function(t,n){return this.config(t),n>1&&(this.__controller.root.reflow=r),i.__mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this}}))};var N=c(d,(function(t,i){function n(t){t.jQ[0].normalize();var i=t.jQ[0].firstChild;if(i){f("only node in TextBlock span is Text node",3===i.nodeType);var n=Z(i.data);return n.jQadd(i),t.children().disown(),n.adopt(t,0,0)}}t.ctrlSeq="\\text",t.replaces=function(t){t instanceof g?this.replacedText=t.remove().jQ.text():"string"==typeof t&&(this.replacedText=t)},t.jQadd=function(t){i.jQadd.call(this,t),this.ends[l]&&this.ends[l].jQadd(this.jQ[0].firstChild)},t.createLeftOf=function(t){if(i.createLeftOf.call(this,t),this[1].siblingCreated&&this[1].siblingCreated(t.options,l),this[l].siblingCreated&&this[l].siblingCreated(t.options,1),this.bubble("reflow"),t.insAtRightEnd(this),this.replacedText)for(var n=0;n<this.replacedText.length;n+=1)this.write(t,this.replacedText.charAt(n))},t.parser=function(){var t=this,i=Q.string,n=Q.regex;return Q.optWhitespace.then(i("{")).then(n(/^[^}]*/)).skip(i("}")).map((function(i){return 0===i.length?g():(Z(i).adopt(t,0,0),t)}))},t.textContents=function(){return this.foldChildren("",(function(t,i){return t+i.text}))},t.text=function(){return'"'+this.textContents()+'"'},t.latex=function(){var t=this.textContents();return 0===t.length?"":"\\text{"+t+"}"},t.html=function(){return'<span class="mq-text-mode" mathquill-command-id='+this.id+">"+this.textContents()+"</span>"},t.moveTowards=function(t,i){i.insAtDirEnd(-t,this)},t.moveOutOf=function(t,i){i.insDirOf(t,this)},t.unselectInto=t.moveTowards,t.selectTowards=j.prototype.selectTowards,t.deleteTowards=j.prototype.deleteTowards,t.selectOutOf=function(t,i){i.insDirOf(t,this)},t.deleteOutOf=function(t,i){this.isEmpty()&&i.insRightOf(this)},t.write=function(t,n){if(t.show().deleteSelection(),"$"!==n)t[l]?t[l].appendText(n):Z(n).createLeftOf(t);else if(this.isEmpty())t.insRightOf(this),P("\\$","$").createLeftOf(t);else if(t[1])if(t[l]){var s=N(),r=this.ends[l];r.disown().jQ.detach(),r.adopt(s,0,0),t.insLeftOf(this),i.createLeftOf.call(s,t)}else t.insLeftOf(this);else t.insRightOf(this)},t.seek=function(t,i){i.hide();var s=n(this),r=this.jQ.width()/this.text.length,e=Math.round((t-this.jQ.offset().left)/r);e<=0?i.insAtLeftEnd(this):e>=s.text.length?i.insAtRightEnd(this):i.insLeftOf(s.splitRight(e));for(var o=t-i.show().offset().left,h=o&&o<0?l:1,u=h;i[h]&&o*u>0;)i[h].moveTowards(h,i),u=o,o=t-i.offset().left;if(h*o<-h*u&&i[-h].moveTowards(-h,i),i.anticursor){if(i.anticursor.parent===this){var a=i[l]&&i[l].text.length;if(this.anticursorPosition===a)i.anticursor=v.copy(i);else{if(this.anticursorPosition<a){var f=i[l].splitRight(this.anticursorPosition);i[l]=f}else f=i[1].splitRight(this.anticursorPosition-a);i.anticursor=v(this,f[l],f)}}}else this.anticursorPosition=i[l]&&i[l].text.length},t.blur=function(t){Y.prototype.blur.call(this),t&&(""===this.textContents()?(this.remove(),t[l]===this?t[l]=this[l]:t[1]===this&&(t[1]=this[1])):n(this))},t.focus=Y.prototype.focus})),Z=c(d,(function(t,i){function n(t,i){return i.charAt(t===l?0:-1+i.length)}t.init=function(t){i.init.call(this),this.text=t},t.jQadd=function(t){this.dom=t,this.jQ=p(t)},t.jQize=function(){return this.jQadd(document.createTextNode(this.text))},t.appendText=function(t){this.text+=t,this.dom.appendData(t)},t.prependText=function(t){this.text=t+this.text,this.dom.insertData(0,t)},t.insTextAtDirEnd=function(t,i){m(i),1===i?this.appendText(t):this.prependText(t)},t.splitRight=function(t){var i=Z(this.text.slice(t)).adopt(this.parent,this,this[1]);return i.jQadd(this.dom.splitText(t)),this.text=this.text.slice(0,t),i},t.moveTowards=function(t,i){m(t);var s=n(-t,this.text),r=this[-t];return r?r.insTextAtDirEnd(s,t):Z(s).createDir(-t,i),this.deleteTowards(t,i)},t.latex=function(){return this.text},t.deleteTowards=function(t,i){this.text.length>1?1===t?(this.dom.deleteData(0,1),this.text=this.text.slice(1)):(this.dom.deleteData(-1+this.text.length,1),this.text=this.text.slice(0,-1)):(this.remove(),this.jQ.remove(),i[t]=this[t])},t.selectTowards=function(t,i){m(t);var s=i.anticursor,r=n(-t,this.text);if(s[t]===this){var e=Z(r).createDir(t,i);s[t]=e,i.insDirOf(t,e)}else{var o=this[-t];if(o)o.insTextAtDirEnd(r,t);else(e=Z(r).createDir(-t,i)).jQ.insDirOf(-t,i.selection.jQ);1===this.text.length&&s[-t]===this&&(s[-t]=this[-t])}return this.deleteTowards(t,i)}}));function W(t,i,n){return c(N,{ctrlSeq:t,htmlTemplate:"<"+i+" "+n+">&0</"+i+">"})}w.$=b.text=b.textnormal=b.textrm=b.textup=b.textmd=N,b.em=b.italic=b.italics=b.emph=b.textit=b.textsl=W("\\textit","i",'class="mq-text-mode"'),b.strong=b.bold=b.textbf=W("\\textbf","b",'class="mq-text-mode"'),b.sf=b.textsf=W("\\textsf","span",'class="mq-sans-serif mq-text-mode"'),b.tt=b.texttt=W("\\texttt","span",'class="mq-monospace mq-text-mode"'),b.textsc=W("\\textsc","span",'style="font-variant:small-caps" class="mq-text-mode"'),b.uppercase=W("\\uppercase","span",'style="text-transform:uppercase" class="mq-text-mode"'),b.lowercase=W("\\lowercase","span",'style="text-transform:lowercase" class="mq-text-mode"');var X=c(j,(function(t,i){t.init=function(t){i.init.call(this,"$"),this.cursor=t},t.htmlTemplate='<span class="mq-math-mode">&0</span>',t.createBlocks=function(){i.createBlocks.call(this),this.ends[l].cursor=this.cursor,this.ends[l].write=function(t,i){"$"!==i?Y.prototype.write.call(this,t,i):this.isEmpty()?(t.insRightOf(this.parent),this.parent.deleteTowards(dir,t),P("\\$","$").createLeftOf(t.show())):t[1]?t[l]?Y.prototype.write.call(this,t,i):t.insLeftOf(this.parent):t.insRightOf(this.parent)}},t.latex=function(){return"$"+this.ends[l].latex()+"$"}})),V=c(G,(function(t,i){t.keystroke=function(t){if("Spacebar"!==t&&"Shift-Spacebar"!==t)return i.keystroke.apply(this,arguments)},t.write=function(t,i){var n;(t.show().deleteSelection(),"$"===i)?X(t).createLeftOf(t):("<"===i?n="&lt;":">"===i&&(n="&gt;"),P(i,n).createLeftOf(t))}}));S.TextField=function(t){return c(t.EditableField,(function(t,i){this.RootBlock=V,t.__mathquillify=function(){return i.__mathquillify.call(this,"mq-editable-field mq-text-mode")},t.latex=function(t){return arguments.length>0?(this.__controller.renderLatexText(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()}}))},b.notin=b.cong=b.equiv=b.oplus=b.otimes=c(H,(function(t,i){t.init=function(t){i.init.call(this,"\\"+t+" ","&"+t+";")}})),b["≠"]=b.ne=b.neq=a(H,"\\ne ","&ne;"),b.ast=b.star=b.loast=b.lowast=a(H,"\\ast ","&lowast;"),b.therefor=b.therefore=a(H,"\\therefore ","&there4;"),b.cuz=b.because=a(H,"\\because ","&#8757;"),b.prop=b.propto=a(H,"\\propto ","&prop;"),b["≈"]=b.asymp=b.approx=a(H,"\\approx ","&asymp;"),b.isin=b.in=a(H,"\\in ","&isin;"),b.ni=b.contains=a(H,"\\ni ","&ni;"),b.notni=b.niton=b.notcontains=b.doesnotcontain=a(H,"\\not\\ni ","&#8716;"),b.sub=b.subset=a(H,"\\subset ","&sub;"),b.sup=b.supset=b.superset=a(H,"\\supset ","&sup;"),b.nsub=b.notsub=b.nsubset=b.notsubset=a(H,"\\not\\subset ","&#8836;"),b.nsup=b.notsup=b.nsupset=b.notsupset=b.nsuperset=b.notsuperset=a(H,"\\not\\supset ","&#8837;"),b.sube=b.subeq=b.subsete=b.subseteq=a(H,"\\subseteq ","&sube;"),b.supe=b.supeq=b.supsete=b.supseteq=b.supersete=b.superseteq=a(H,"\\supseteq ","&supe;"),b.nsube=b.nsubeq=b.notsube=b.notsubeq=b.nsubsete=b.nsubseteq=b.notsubsete=b.notsubseteq=a(H,"\\not\\subseteq ","&#8840;"),b.nsupe=b.nsupeq=b.notsupe=b.notsupeq=b.nsupsete=b.nsupseteq=b.notsupsete=b.notsupseteq=b.nsupersete=b.nsuperseteq=b.notsupersete=b.notsuperseteq=a(H,"\\not\\supseteq ","&#8841;"),b.N=b.naturals=b.Naturals=a(P,"\\mathbb{N}","&#8469;"),b.P=b.primes=b.Primes=b.projective=b.Projective=b.probability=b.Probability=a(P,"\\mathbb{P}","&#8473;"),b.Z=b.integers=b.Integers=a(P,"\\mathbb{Z}","&#8484;"),b.Q=b.rationals=b.Rationals=a(P,"\\mathbb{Q}","&#8474;"),b.R=b.reals=b.Reals=a(P,"\\mathbb{R}","&#8477;"),b.C=b.complex=b.Complex=b.complexes=b.Complexes=b.complexplane=b.Complexplane=b.ComplexPlane=a(P,"\\mathbb{C}","&#8450;"),b.H=b.Hamiltonian=b.quaternions=b.Quaternions=a(P,"\\mathbb{H}","&#8461;"),b.quad=b.emsp=a(P,"\\quad ","    "),b.qquad=a(P,"\\qquad ","        "),b.diamond=a(P,"\\diamond ","&#9671;"),b.bigtriangleup=a(P,"\\bigtriangleup ","&#9651;"),b.ominus=a(P,"\\ominus ","&#8854;"),b.uplus=a(P,"\\uplus ","&#8846;"),b.bigtriangledown=a(P,"\\bigtriangledown ","&#9661;"),b.sqcap=a(P,"\\sqcap ","&#8851;"),b.triangleleft=a(P,"\\triangleleft ","&#8882;"),b.sqcup=a(P,"\\sqcup ","&#8852;"),b.triangleright=a(P,"\\triangleright ","&#8883;"),b.odot=b.circledot=a(P,"\\odot ","&#8857;"),b.bigcirc=a(P,"\\bigcirc ","&#9711;"),b.dagger=a(P,"\\dagger ","&#0134;"),b.ddagger=a(P,"\\ddagger ","&#135;"),b.wr=a(P,"\\wr ","&#8768;"),b.amalg=a(P,"\\amalg ","&#8720;"),b.models=a(P,"\\models ","&#8872;"),b.prec=a(P,"\\prec ","&#8826;"),b.succ=a(P,"\\succ ","&#8827;"),b.preceq=a(P,"\\preceq ","&#8828;"),b.succeq=a(P,"\\succeq ","&#8829;"),b.simeq=a(P,"\\simeq ","&#8771;"),b.mid=a(P,"\\mid ","&#8739;"),b.ll=a(P,"\\ll ","&#8810;"),b.gg=a(P,"\\gg ","&#8811;"),b.parallel=a(P,"\\parallel ","&#8741;"),b.nparallel=a(P,"\\nparallel ","&#8742;"),b.bowtie=a(P,"\\bowtie ","&#8904;"),b.sqsubset=a(P,"\\sqsubset ","&#8847;"),b.sqsupset=a(P,"\\sqsupset ","&#8848;"),b.smile=a(P,"\\smile ","&#8995;"),b.sqsubseteq=a(P,"\\sqsubseteq ","&#8849;"),b.sqsupseteq=a(P,"\\sqsupseteq ","&#8850;"),b.doteq=a(P,"\\doteq ","&#8784;"),b.frown=a(P,"\\frown ","&#8994;"),b.vdash=a(P,"\\vdash ","&#8870;"),b.dashv=a(P,"\\dashv ","&#8867;"),b.nless=a(P,"\\nless ","&#8814;"),b.ngtr=a(P,"\\ngtr ","&#8815;"),b.longleftarrow=a(P,"\\longleftarrow ","&#8592;"),b.longrightarrow=a(P,"\\longrightarrow ","&#8594;"),b.Longleftarrow=a(P,"\\Longleftarrow ","&#8656;"),b.Longrightarrow=a(P,"\\Longrightarrow ","&#8658;"),b.longleftrightarrow=a(P,"\\longleftrightarrow ","&#8596;"),b.updownarrow=a(P,"\\updownarrow ","&#8597;"),b.Longleftrightarrow=a(P,"\\Longleftrightarrow ","&#8660;"),b.Updownarrow=a(P,"\\Updownarrow ","&#8661;"),b.mapsto=a(P,"\\mapsto ","&#8614;"),b.nearrow=a(P,"\\nearrow ","&#8599;"),b.hookleftarrow=a(P,"\\hookleftarrow ","&#8617;"),b.hookrightarrow=a(P,"\\hookrightarrow ","&#8618;"),b.searrow=a(P,"\\searrow ","&#8600;"),b.leftharpoonup=a(P,"\\leftharpoonup ","&#8636;"),b.rightharpoonup=a(P,"\\rightharpoonup ","&#8640;"),b.swarrow=a(P,"\\swarrow ","&#8601;"),b.leftharpoondown=a(P,"\\leftharpoondown ","&#8637;"),b.rightharpoondown=a(P,"\\rightharpoondown ","&#8641;"),b.nwarrow=a(P,"\\nwarrow ","&#8598;"),b.ldots=a(P,"\\ldots ","&#8230;"),b.cdots=a(P,"\\cdots ","&#8943;"),b.vdots=a(P,"\\vdots ","&#8942;"),b.ddots=a(P,"\\ddots ","&#8945;"),b.surd=a(P,"\\surd ","&#8730;"),b.triangle=a(P,"\\triangle ","&#9651;"),b.ell=a(P,"\\ell ","&#8467;"),b.top=a(P,"\\top ","&#8868;"),b.flat=a(P,"\\flat ","&#9837;"),b.natural=a(P,"\\natural ","&#9838;"),b.sharp=a(P,"\\sharp ","&#9839;"),b.wp=a(P,"\\wp ","&#8472;"),b.bot=a(P,"\\bot ","&#8869;"),b.clubsuit=a(P,"\\clubsuit ","&#9827;"),b.diamondsuit=a(P,"\\diamondsuit ","&#9826;"),b.heartsuit=a(P,"\\heartsuit ","&#9825;"),b.spadesuit=a(P,"\\spadesuit ","&#9824;"),b.parallelogram=a(P,"\\parallelogram ","&#9649;"),b.square=a(P,"\\square ","&#11036;"),b.oint=a(P,"\\oint ","&#8750;"),b.bigcap=a(P,"\\bigcap ","&#8745;"),b.bigcup=a(P,"\\bigcup ","&#8746;"),b.bigsqcup=a(P,"\\bigsqcup ","&#8852;"),b.bigvee=a(P,"\\bigvee ","&#8744;"),b.bigwedge=a(P,"\\bigwedge ","&#8743;"),b.bigodot=a(P,"\\bigodot ","&#8857;"),b.bigotimes=a(P,"\\bigotimes ","&#8855;"),b.bigoplus=a(P,"\\bigoplus ","&#8853;"),b.biguplus=a(P,"\\biguplus ","&#8846;"),b.lfloor=a(P,"\\lfloor ","&#8970;"),b.rfloor=a(P,"\\rfloor ","&#8971;"),b.lceil=a(P,"\\lceil ","&#8968;"),b.rceil=a(P,"\\rceil ","&#8969;"),b.opencurlybrace=b.lbrace=a(P,"\\lbrace ","{"),b.closecurlybrace=b.rbrace=a(P,"\\rbrace ","}"),b.lbrack=a(P,"["),b.rbrack=a(P,"]"),b.slash=a(P,"/"),b.vert=a(P,"|"),b.perp=b.perpendicular=a(P,"\\perp ","&perp;"),b.nabla=b.del=a(P,"\\nabla ","&nabla;"),b.hbar=a(P,"\\hbar ","&#8463;"),b.AA=b.Angstrom=b.angstrom=a(P,"\\text\\AA ","&#8491;"),b.ring=b.circ=b.circle=a(P,"\\circ ","&#8728;"),b.bull=b.bullet=a(P,"\\bullet ","&bull;"),b.setminus=b.smallsetminus=a(P,"\\setminus ","&#8726;"),b.not=b["¬"]=b.neg=a(P,"\\neg ","&not;"),b["…"]=b.dots=b.ellip=b.hellip=b.ellipsis=b.hellipsis=a(P,"\\dots ","&hellip;"),b.converges=b.darr=b.dnarr=b.dnarrow=b.downarrow=a(P,"\\downarrow ","&darr;"),b.dArr=b.dnArr=b.dnArrow=b.Downarrow=a(P,"\\Downarrow ","&dArr;"),b.diverges=b.uarr=b.uparrow=a(P,"\\uparrow ","&uarr;"),b.uArr=b.Uparrow=a(P,"\\Uparrow ","&uArr;"),b.to=a(H,"\\to ","&rarr;"),b.rarr=b.rightarrow=a(P,"\\rightarrow ","&rarr;"),b.implies=a(H,"\\Rightarrow ","&rArr;"),b.rArr=b.Rightarrow=a(P,"\\Rightarrow ","&rArr;"),b.gets=a(H,"\\gets ","&larr;"),b.larr=b.leftarrow=a(P,"\\leftarrow ","&larr;"),b.impliedby=a(H,"\\Leftarrow ","&lArr;"),b.lArr=b.Leftarrow=a(P,"\\Leftarrow ","&lArr;"),b.harr=b.lrarr=b.leftrightarrow=a(P,"\\leftrightarrow ","&harr;"),b.iff=a(H,"\\Leftrightarrow ","&hArr;"),b.hArr=b.lrArr=b.Leftrightarrow=a(P,"\\Leftrightarrow ","&hArr;"),b.Re=b.Real=b.real=a(P,"\\Re ","&real;"),b.Im=b.imag=b.image=b.imagin=b.imaginary=b.Imaginary=a(P,"\\Im ","&image;"),b.part=b.partial=a(P,"\\partial ","&part;"),b.infty=b.infin=b.infinity=a(P,"\\infty ","&infin;"),b.alef=b.alefsym=b.aleph=b.alephsym=a(P,"\\aleph ","&alefsym;"),b.xist=b.xists=b.exist=b.exists=a(P,"\\exists ","&exist;"),b.nexists=b.nexist=a(P,"\\nexists ","&#8708;"),b.and=b.land=b.wedge=a(P,"\\wedge ","&and;"),b.or=b.lor=b.vee=a(P,"\\vee ","&or;"),b.o=b.O=b.empty=b.emptyset=b.oslash=b.Oslash=b.nothing=b.varnothing=a(H,"\\varnothing ","&empty;"),b.cup=b.union=a(H,"\\cup ","&cup;"),b.cap=b.intersect=b.intersection=a(H,"\\cap ","&cap;"),b.deg=b.degree=a(P,"\\degree ","&deg;"),b.ang=b.angle=a(P,"\\angle ","&ang;"),b.measuredangle=a(P,"\\measuredangle ","&#8737;");var J=c(P,(function(t,i){t.createLeftOf=function(t){t.options.autoSubscriptNumerals&&t.parent!==t.parent.parent.sub&&(t[l]instanceof K&&!1!==t[l].isItalic||t[l]instanceof bt&&t[l][l]instanceof K&&!1!==t[l][l].isItalic)?(b._().createLeftOf(t),i.createLeftOf.call(this,t),t.insRightOf(t.parent.parent)):i.createLeftOf.call(this,t)}})),K=c(B,(function(t,i){t.init=function(t,n){i.init.call(this,t,"<var>"+(n||t)+"</var>")},t.text=function(){var t=this.ctrlSeq;return!this[l]||this[l]instanceof K||this[l]instanceof H||"\\ "===this[l].ctrlSeq||(t="*"+t),!this[1]||this[1]instanceof H||this[1]instanceof bt||(t+="*"),t}}));$.p.autoCommands={_maxLength:0},M.autoCommands=function(t){if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(var i=t.split(" "),n={},r=0,e=0;e<i.length;e+=1){var o=i[e];if(o.length<2)throw'autocommand "'+o+'" not minimum length of 2';if(b[o]===rt)throw'"'+o+'" is a built-in operator name';n[o]=1,r=s(r,o.length)}return n._maxLength=r,n};var tt=c(K,(function(t,i){function s(t){return!t||t instanceof H||t instanceof kt}t.init=function(t){return i.init.call(this,this.letter=t)},t.createLeftOf=function(t){i.createLeftOf.apply(this,arguments);var n=t.options.autoCommands,s=n._maxLength;if(s>0){for(var r="",e=this,o=0;e instanceof tt&&e.ctrlSeq===e.letter&&o<s;)r=e.letter+r,e=e[l],o+=1;for(;r.length;){if(n.hasOwnProperty(r)){for(o=1,e=this;o<r.length;o+=1,e=e[l]);return g(e,this).remove(),t[l]=e[l],b[r](r).createLeftOf(t)}r=r.slice(1)}}},t.italicize=function(t){return this.isItalic=t,this.jQ.toggleClass("mq-operator-name",!t),this},t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(t,i){i!==l&&this[1]instanceof tt||this.autoUnItalicize(t)},t.autoUnItalicize=function(t){var i=t.autoOperatorNames;if(0!==i._maxLength){for(var r=this.letter,e=this[l];e instanceof tt;e=e[l])r=e.letter+r;for(var o=this[1];o instanceof tt;o=o[1])r+=o.letter;g(e[1]||this.parent.ends[l],o[l]||this.parent.ends[1]).each((function(t){t.italicize(!0).jQ.removeClass("mq-first mq-last mq-followed-by-supsub"),t.ctrlSeq=t.letter}));t:for(var h=0,u=e[1]||this.parent.ends[l];h<r.length;h+=1,u=u[1])for(var a=n(i._maxLength,r.length-h);a>0;a-=1){var f=r.slice(h,h+a);if(i.hasOwnProperty(f)){for(var c=0,m=u;c<a;c+=1,m=m[1]){m.italicize(!1);var p=m}var v=it.hasOwnProperty(f);if(u.ctrlSeq=(v?"\\":"\\operatorname{")+u.ctrlSeq,p.ctrlSeq+=v?" ":"}",st.hasOwnProperty(f)&&p[l][l][l].jQ.addClass("mq-last"),s(u[l])||u.jQ.addClass("mq-first"),!s(p[1]))if(p[1]instanceof bt){var d=p[1];(d.siblingCreated=d.siblingDeleted=function(){d.jQ.toggleClass("mq-after-operator-name",!(d[1]instanceof zt))})()}else p.jQ.toggleClass("mq-last",!(p[1]instanceof zt));h+=a-1,u=p;continue t}}}}})),it={},nt=$.p.autoOperatorNames={_maxLength:9},st={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var t="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),i=0;i<t.length;i+=1)it[t[i]]=nt[t[i]]=1;var n="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" ");for(i=0;i<n.length;i+=1)it[n[i]]=1;var s="sin cos tan sec cosec csc cotan cot ctg".split(" ");for(i=0;i<s.length;i+=1)nt[s[i]]=nt["arc"+s[i]]=nt[s[i]+"h"]=nt["ar"+s[i]+"h"]=nt["arc"+s[i]+"h"]=1;var r="gcf hcf lcm proj span".split(" ");for(i=0;i<r.length;i+=1)nt[r[i]]=1}(),M.autoOperatorNames=function(t){if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(var i=t.split(" "),n={},r=0,e=0;e<i.length;e+=1){var o=i[e];if(o.length<2)throw'"'+o+'" not minimum length of 2';n[o]=1,r=s(r,o.length)}return n._maxLength=r,n};var rt=c(B,(function(t,i){t.init=function(t){this.ctrlSeq=t},t.createLeftOf=function(t){for(var i=this.ctrlSeq,n=0;n<i.length;n+=1)tt(i.charAt(n)).createLeftOf(t)},t.parser=function(){for(var t=this.ctrlSeq,i=Y(),n=0;n<t.length;n+=1)tt(t.charAt(n)).adopt(i,i.ends[1],0);return Q.succeed(i.children())}}));for(var et in nt)nt.hasOwnProperty(et)&&(b[et]=rt);b.operatorname=c(j,(function(t){t.createLeftOf=r,t.numBlocks=function(){return 1},t.parser=function(){return _.block.map((function(t){return t.children()}))}})),b.f=c(tt,(function(t,i){t.init=function(){B.p.init.call(this,this.letter="f",'<var class="mq-f">f</var>')},t.italicize=function(t){return this.jQ.html("f").toggleClass("mq-f",t),i.italicize.apply(this,arguments)}})),b[" "]=b.space=a(P,"\\ ","&nbsp;"),b["'"]=b.prime=a(P,"'","&prime;"),b.backslash=a(P,"\\backslash ","\\"),w["\\"]||(w["\\"]=b.backslash),b.$=a(P,"\\$","$");var ot=c(B,(function(t,i){t.init=function(t,n){i.init.call(this,t,'<span class="mq-nonSymbola">'+(n||t)+"</span>")}}));b["@"]=ot,b["&"]=a(ot,"\\&","&amp;"),b["%"]=a(ot,"\\%","%"),b.alpha=b.beta=b.gamma=b.delta=b.zeta=b.eta=b.theta=b.iota=b.kappa=b.mu=b.nu=b.xi=b.rho=b.sigma=b.tau=b.chi=b.psi=b.omega=c(K,(function(t,i){t.init=function(t){i.init.call(this,"\\"+t+" ","&"+t+";")}})),b.phi=a(K,"\\phi ","&#981;"),b.phiv=b.varphi=a(K,"\\varphi ","&phi;"),b.epsilon=a(K,"\\epsilon ","&#1013;"),b.epsiv=b.varepsilon=a(K,"\\varepsilon ","&epsilon;"),b.piv=b.varpi=a(K,"\\varpi ","&piv;"),b.sigmaf=b.sigmav=b.varsigma=a(K,"\\varsigma ","&sigmaf;"),b.thetav=b.vartheta=b.thetasym=a(K,"\\vartheta ","&thetasym;"),b.upsilon=b.upsi=a(K,"\\upsilon ","&upsilon;"),b.gammad=b.Gammad=b.digamma=a(K,"\\digamma ","&#989;"),b.kappav=b.varkappa=a(K,"\\varkappa ","&#1008;"),b.rhov=b.varrho=a(K,"\\varrho ","&#1009;"),b.pi=b.π=a(ot,"\\pi ","&pi;"),b.lambda=a(ot,"\\lambda ","&lambda;"),b.Upsilon=b.Upsi=b.upsih=b.Upsih=a(B,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),b.Gamma=b.Delta=b.Theta=b.Lambda=b.Xi=b.Pi=b.Sigma=b.Phi=b.Psi=b.Omega=b.forall=c(P,(function(t,i){t.init=function(t){i.init.call(this,"\\"+t+" ","&"+t+";")}}));var ht=c(j,(function(t){t.init=function(t){this.latex=t},t.createLeftOf=function(t){var i=_.parse(this.latex);i.children().adopt(t.parent,t[l],t[1]),t[l]=i.ends[1],i.jQize().insertBefore(t.jQ),i.finalizeInsert(t.options,t),i.ends[1][1].siblingCreated&&i.ends[1][1].siblingCreated(t.options,l),i.ends[l][l].siblingCreated&&i.ends[l][l].siblingCreated(t.options,1),t.parent.bubble("reflow")},t.parser=function(){var t=_.parse(this.latex).children();return Q.succeed(t)}}));b["¹"]=a(ht,"^1"),b["²"]=a(ht,"^2"),b["³"]=a(ht,"^3"),b["¼"]=a(ht,"\\frac14"),b["½"]=a(ht,"\\frac12"),b["¾"]=a(ht,"\\frac34");var ut=c(H,(function(t){t.init=P.prototype.init,t.contactWeld=t.siblingCreated=t.siblingDeleted=function(t,i){if(1!==i)return this.jQ[0].className=!this[l]||this[l]instanceof H||/^[,;:\(\[]$/.test(this[l].ctrlSeq)?"":"mq-binary-operator",this}}));b["+"]=a(ut,"+","+"),b["–"]=b["-"]=a(ut,"-","&minus;"),b["±"]=b.pm=b.plusmn=b.plusminus=a(ut,"\\pm ","&plusmn;"),b.mp=b.mnplus=b.minusplus=a(ut,"\\mp ","&#8723;"),w["*"]=b.sdot=b.cdot=a(H,"\\cdot ","&middot;","*");var at=c(H,(function(t,i){t.init=function(t,n){this.data=t,this.strict=n;var s=n?"Strict":"";i.init.call(this,t["ctrlSeq"+s],t["html"+s],t["text"+s])},t.swap=function(t){this.strict=t;var i=t?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+i],this.jQ.html(this.data["html"+i]),this.textTemplate=[this.data["text"+i]]},t.deleteTowards=function(t,n){if(t===l&&!this.strict)return this.swap(!0),void this.bubble("reflow");i.deleteTowards.apply(this,arguments)}})),ft={ctrlSeq:"\\le ",html:"&le;",text:"≤",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<"},ct={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">"};b["<"]=b.lt=a(at,ft,!0),b[">"]=b.gt=a(at,ct,!0),b["≤"]=b.le=b.leq=a(at,ft,!1),b["≥"]=b.ge=b.geq=a(at,ct,!1);var lt=c(H,(function(t,i){t.init=function(){i.init.call(this,"=","=")},t.createLeftOf=function(t){if(t[l]instanceof at&&t[l].strict)return t[l].swap(!1),void t[l].bubble("reflow");i.createLeftOf.apply(this,arguments)}}));b["="]=lt,b["×"]=b.times=a(H,"\\times ","&times;","[x]"),b["÷"]=b.div=b.divide=b.divides=a(H,"\\div ","&divide;","[/]"),w["~"]=b.sim=a(H,"\\sim ","~","~");var mt,pt,vt=r,dt=document.createElement("div").style;for(var qt in{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1})if(qt in dt){pt=qt;break}pt?mt=function(t,i,n){t.css(pt,"scale("+i+","+n+")")}:"filter"in dt?(vt=function(t){t.className=t.className},mt=function(t,i,n){i/=1+(n-1)/2,t.css("fontSize",n+"em"),t.hasClass("mq-matrixed-container")||t.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"></span>');var s=t.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+i+",SizingMethod='auto expand')");function r(){t.css("marginRight",(s.width()-1)*(i-1)/i+"px")}r();var e=setInterval(r);p(window).load((function(){clearTimeout(e),r()}))}):mt=function(t,i,n){t.css("fontSize",n+"em")};var gt=c(j,(function(t,i){t.init=function(t,n,s){i.init.call(this,t,"<"+n+" "+s+">&0</"+n+">")}}));b.mathrm=a(gt,"\\mathrm","span",'class="mq-roman mq-font"'),b.mathit=a(gt,"\\mathit","i",'class="mq-font"'),b.mathbf=a(gt,"\\mathbf","b",'class="mq-font"'),b.mathsf=a(gt,"\\mathsf","span",'class="mq-sans-serif mq-font"'),b.mathtt=a(gt,"\\mathtt","span",'class="mq-monospace mq-font"'),b.underline=a(gt,"\\underline","span",'class="mq-non-leaf mq-underline"'),b.overline=b.bar=a(gt,"\\overline","span",'class="mq-non-leaf mq-overline"'),b.overrightarrow=a(gt,"\\overrightarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-right"'),b.overleftarrow=a(gt,"\\overleftarrow","span",'class="mq-non-leaf mq-overarrow mq-arrow-left"');b.textcolor=c(j,(function(t,i){t.setColor=function(t){this.color=t,this.htmlTemplate='<span class="mq-textcolor" style="color:'+t+'">&0</span>'},t.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},t.parser=function(){var t=this,n=Q.optWhitespace,s=Q.string,r=Q.regex;return n.then(s("{")).then(r(/^[#\w\s.,()%-]*/)).skip(s("}")).then((function(n){return t.setColor(n),i.parser.call(t)}))}})),b.class=c(j,(function(t,i){t.parser=function(){var t=this,n=Q.string,s=Q.regex;return Q.optWhitespace.then(n("{")).then(s(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then((function(n){return t.htmlTemplate='<span class="mq-class '+n+'">&0</span>',i.parser.call(t)}))}}));var bt=c(j,(function(t,n){t.ctrlSeq="_{...}^{...}",t.createLeftOf=function(t){if(t[l]||!t.options.supSubsRequireOperand)return n.createLeftOf.apply(this,arguments)},t.contactWeld=function(t){for(var i=l;i;i=i===l&&1)if(this[i]instanceof bt){for(var n="sub";n;n="sub"===n&&"sup"){var s=this[n],r=this[i][n];if(s){if(r)if(s.isEmpty())o=v(r,0,r.ends[l]);else{s.jQ.children().insAtDirEnd(-i,r.jQ);var e=s.children().disown(),o=v(r,e.ends[1],r.ends[l]);i===l?e.adopt(r,r.ends[1],0):e.adopt(r,0,r.ends[l])}else this[i].addBlock(s.disown());this.placeCursor=function(t,n){return function(s){s.insAtDirEnd(-i,t||n)}}(r,s)}}this.remove(),t&&t[l]===this&&(1===i&&o?o[l]?t.insRightOf(o[l]):t.insAtLeftEnd(o.parent):t.insRightOf(this[i]));break}},$.p.charsThatBreakOutOfSupSub="",t.finalizeTree=function(){this.ends[l].write=function(t,i){if(t.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===i)return;var n=this.chToCmd(i);return n instanceof B?t.deleteSelection():t.clearSelection().insRightOf(this.parent),n.createLeftOf(t.show())}t[l]&&!t[1]&&!t.selection&&t.options.charsThatBreakOutOfSupSub.indexOf(i)>-1&&t.insRightOf(this.parent),Y.p.write.apply(this,arguments)}},t.moveTowards=function(t,i,s){i.options.autoSubscriptNumerals&&!this.sup?i.insDirOf(t,this):n.moveTowards.apply(this,arguments)},t.deleteTowards=function(t,i){if(i.options.autoSubscriptNumerals&&this.sub){var s=this.sub.ends[-t];s instanceof B?s.remove():s&&s.deleteTowards(t,i.insAtDirEnd(-t,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(l,i.insAtLeftEnd(this.sub)),this.sup&&i.insDirOf(-t,this))}else n.deleteTowards.apply(this,arguments)},t.latex=function(){function t(t,i){var n=i&&i.latex();return i?t+(1===n.length?n:"{"+(n||" ")+"}"):""}return t("_",this.sub)+t("^",this.sup)},t.addBlock=function(t){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=t,t.adopt(this,this.sub,0).downOutOf=this.sub,t.jQ=p('<span class="mq-sup"/>').append(t.jQ.children()).attr(i,t.id).prependTo(this.jQ)):(this.sub=this.downInto=this.sup.downOutOf=t,t.adopt(this,0,this.sup).upOutOf=this.sup,t.jQ=p('<span class="mq-sub"></span>').append(t.jQ.children()).attr(i,t.id).appendTo(this.jQ.removeClass("mq-sup-only")),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var n=0;n<2;n+=1)!function(t,i,n,s){t[i].deleteOutOf=function(r,e){if(e.insDirOf(this[r]?-r:r,this.parent),!this.isEmpty()){var o=this.ends[r];this.children().disown().withDirAdopt(r,e.parent,e[r],e[-r]).jQ.insDirOf(-r,e.jQ),e[-r]=o}t.supsub=n,delete t[i],delete t[s+"Into"],t[n][s+"OutOf"]=wt,delete t[n].deleteOutOf,"sub"===i&&p(t.jQ.addClass("mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[n],"sup sub".split(" ")[n],"down up".split(" ")[n])}}));function wt(t){var i=this.parent,n=t;do{if(n[1])return t.insLeftOf(i);n=n.parent.parent}while(n!==i);t.insRightOf(i)}b.subscript=b._=c(bt,(function(t,i){t.supsub="sub",t.htmlTemplate='<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["_"],t.finalizeTree=function(){this.downInto=this.sub=this.ends[l],this.sub.upOutOf=wt,i.finalizeTree.call(this)}})),b.superscript=b.supscript=b["^"]=c(bt,(function(t,i){t.supsub="sup",t.htmlTemplate='<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0</span></span>',t.textTemplate=["^"],t.finalizeTree=function(){this.upInto=this.sup=this.ends[1],this.sup.downOutOf=wt,i.finalizeTree.call(this)}}));var kt=c(j,(function(t,i){t.init=function(t,i){var n='<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1</span></span><big>'+i+'</big><span class="mq-from"><span>&0</span></span></span>';B.prototype.init.call(this,t,n)},t.createLeftOf=function(t){i.createLeftOf.apply(this,arguments),t.options.sumStartsWithNEquals&&(tt("n").createLeftOf(t),lt().createLeftOf(t))},t.latex=function(){function t(t){return 1===t.length?t:"{"+(t||" ")+"}"}return this.ctrlSeq+"_"+t(this.ends[l].latex())+"^"+t(this.ends[1].latex())},t.parser=function(){for(var t=Q.string,i=Q.optWhitespace,n=Q.succeed,s=_.block,r=this,e=r.blocks=[Y(),Y()],o=0;o<e.length;o+=1)e[o].adopt(r,r.ends[1],0);return i.then(t("_").or(t("^"))).then((function(t){var i=e["_"===t?0:1];return s.then((function(t){return t.children().adopt(i,i.ends[1],0),n(r)}))})).many().result(r)},t.finalizeTree=function(){this.downInto=this.ends[l],this.upInto=this.ends[1],this.ends[l].upOutOf=this.ends[1],this.ends[1].downOutOf=this.ends[l]}}));b["∑"]=b.sum=b.summation=a(kt,"\\sum ","&sum;"),b["∏"]=b.prod=b.product=a(kt,"\\prod ","&prod;"),b.coprod=b.coproduct=a(kt,"\\coprod ","&#8720;"),b["∫"]=b.int=b.integral=c(kt,(function(t,i){t.init=function(){B.prototype.init.call(this,"\\int ",'<span class="mq-int mq-non-leaf"><big>&int;</big><span class="mq-supsub mq-non-leaf"><span class="mq-sup"><span class="mq-sup-inner">&1</span></span><span class="mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>')},t.createLeftOf=j.p.createLeftOf}));var xt=b.frac=b.dfrac=b.cfrac=b.fraction=c(j,(function(t,i){t.ctrlSeq="\\frac",t.htmlTemplate='<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0</span><span class="mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["(",")/(",")"],t.finalizeTree=function(){this.upInto=this.ends[1].upOutOf=this.ends[l],this.downInto=this.ends[l].downOutOf=this.ends[1]}})),yt=b.over=w["/"]=c(xt,(function(t,i){t.createLeftOf=function(t){if(!this.replacedFragment){for(var n=t[l];n&&!(n instanceof H||n instanceof(b.text||r)||n instanceof kt||"\\ "===n.ctrlSeq||/^[,;:]$/.test(n.ctrlSeq));)n=n[l];n instanceof kt&&n[1]instanceof bt&&(n=n[1])[1]instanceof bt&&n[1].ctrlSeq!=n.ctrlSeq&&(n=n[1]),n!==t[l]&&(this.replaces(g(n[1]||t.parent.ends[l],t[l])),t[l]=n)}i.createLeftOf.call(this,t)}})),St=b.sqrt=b["√"]=c(j,(function(t,i){t.ctrlSeq="\\sqrt",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;</span><span class="mq-non-leaf mq-sqrt-stem">&0</span></span>',t.textTemplate=["sqrt(",")"],t.parser=function(){return _.optBlock.then((function(t){return _.block.map((function(i){var n=$t();return n.blocks=[t,i],t.adopt(n,0,0),i.adopt(n,t,0),n}))})).or(i.parser.call(this))},t.reflow=function(){var t=this.ends[1].jQ;mt(t.prev(),1,t.innerHeight()/+t.css("fontSize").slice(0,-2)-.1)}})),$t=(b.vec=c(j,(function(t,i){t.ctrlSeq="\\vec",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-vector-prefix">&rarr;</span><span class="mq-vector-stem">&0</span></span>',t.textTemplate=["vec(",")"]})),b.nthroot=c(St,(function(t,i){t.htmlTemplate='<sup class="mq-nthroot mq-non-leaf">&0</sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;</span><span class="mq-sqrt-stem mq-non-leaf">&1</span></span>',t.textTemplate=["sqrt[","](",")"],t.latex=function(){return"\\sqrt["+this.ends[l].latex()+"]{"+this.ends[1].latex()+"}"}})));function Mt(t,i){t.jQadd=function(){i.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")},t.reflow=function(){var t=this.contentjQ.outerHeight()/parseFloat(this.contentjQ.css("fontSize"));mt(this.delimjQs,n(1+.2*(t-1),1.2),1.2*t)}}var zt=c(c(j,Mt),(function(t,i){t.init=function(t,n,s,r,e){i.init.call(this,"\\left"+r,void 0,[n,s]),this.side=t,this.sides={},this.sides[l]={ch:n,ctrlSeq:r},this.sides[1]={ch:s,ctrlSeq:e}},t.numBlocks=function(){return 1},t.html=function(){return this.htmlTemplate='<span class="mq-non-leaf"><span class="mq-scaled mq-paren'+(1===this.side?" mq-ghost":"")+'">'+this.sides[l].ch+'</span><span class="mq-non-leaf">&0</span><span class="mq-scaled mq-paren'+(this.side===l?" mq-ghost":"")+'">'+this.sides[1].ch+"</span></span>",i.html.call(this)},t.latex=function(){return"\\left"+this.sides[l].ctrlSeq+this.ends[l].latex()+"\\right"+this.sides[1].ctrlSeq},t.oppBrack=function(t,i,n){return i instanceof zt&&i.side&&i.side!==-n&&("|"===this.sides[this.side].ch||i.side===-this.side)&&(!t.restrictMismatchedBrackets||Ct[this.sides[this.side].ch]===i.sides[i.side].ch||{"(":"]","[":")"}[this.sides[l].ch]===i.sides[1].ch)&&i},t.closeOpposing=function(t){t.side=0,t.sides[this.side]=this.sides[this.side],t.delimjQs.eq(this.side===l?0:1).removeClass("mq-ghost").html(this.sides[this.side].ch)},t.createLeftOf=function(t){if(!this.replacedFragment)var n=t.options,s=this.oppBrack(n,t[l],l)||this.oppBrack(n,t[1],1)||this.oppBrack(n,t.parent.parent);if(s){var r=this.side=-s.side;this.closeOpposing(s),s===t.parent.parent&&t[r]&&(g(t[r],t.parent.ends[r],-r).disown().withDirAdopt(-r,s.parent,s,s[r]).jQ.insDirOf(r,s.jQ),s.bubble("reflow"))}else r=(s=this).side,s.replacedFragment?s.side=0:t[-r]&&(s.replaces(g(t[-r],t.parent.ends[-r],r)),t[-r]=0),i.createLeftOf.call(s,t);r===l?t.insAtLeftEnd(s.ends[l]):t.insRightOf(s)},t.placeCursor=r,t.unwrap=function(){this.ends[l].children().disown().adopt(this.parent,this,this[1]).jQ.insertAfter(this.jQ),this.remove()},t.deleteSide=function(t,i,n){var s=this.parent,r=this[t],e=s.ends[t];if(t===this.side)return this.unwrap(),void(r?n.insDirOf(-t,r):n.insAtDirEnd(t,s));var o=n.options,h=!this.side;if(this.side=-t,this.oppBrack(o,this.ends[l].ends[this.side],t)){this.closeOpposing(this.ends[l].ends[this.side]);var u=this.ends[l].ends[t];this.unwrap(),u.siblingCreated&&u.siblingCreated(n.options,t),r?n.insDirOf(-t,r):n.insAtDirEnd(t,s)}else{if(this.oppBrack(o,this.parent.parent,t))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(i&&h)return this.unwrap(),void(r?n.insDirOf(-t,r):n.insAtDirEnd(t,s));this.sides[t]={ch:Ct[this.sides[this.side].ch],ctrlSeq:Ct[this.sides[this.side].ctrlSeq]},this.delimjQs.removeClass("mq-ghost").eq(t===l?0:1).addClass("mq-ghost").html(this.sides[t].ch)}if(r){u=this.ends[l].ends[t];g(r,e,-t).disown().withDirAdopt(-t,this.ends[l],u,0).jQ.insAtDirEnd(t,this.ends[l].jQ.removeClass("mq-empty")),u.siblingCreated&&u.siblingCreated(n.options,t),n.insDirOf(-t,r)}else i?n.insDirOf(t,this):n.insAtDirEnd(t,this.ends[l])}},t.deleteTowards=function(t,i){this.deleteSide(-t,!1,i)},t.finalizeTree=function(){this.ends[l].deleteOutOf=function(t,i){this.parent.deleteSide(t,!0,i)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===l?1:0).removeClass("mq-ghost"),this.side=0}},t.siblingCreated=function(t,i){i===-this.side&&this.finalizeTree()}})),Ct={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|"};function Ot(t,i){i=i||t;var n=Ct[t],s=Ct[i];w[t]=a(zt,l,t,n,i,s),w[n]=a(zt,1,t,n,i,s)}Ot("("),Ot("["),Ot("{","\\{"),b.langle=a(zt,l,"&lang;","&rang;","\\langle ","\\rangle "),b.rangle=a(zt,1,"&lang;","&rang;","\\langle ","\\rangle "),w["|"]=a(zt,l,"|","|","|","|"),b.left=c(j,(function(t){t.parser=function(){var t=Q.regex,i=Q.string,n=(Q.succeed,Q.optWhitespace);return n.then(t(/^(?:[([|]|\\\{)/)).then((function(s){var r="\\"===s.charAt(0)?s.slice(1):s;return _.then((function(e){return i("\\right").skip(n).then(t(/^(?:[\])|]|\\\})/)).map((function(t){var i="\\"===t.charAt(0)?t.slice(1):t,n=zt(0,r,i,s,t);return n.blocks=[e],e.adopt(n,0,0),n}))}))}))}})),b.right=c(j,(function(t){t.parser=function(){return Q.fail("unmatched \\right")}}));var Tt=b.binom=b.binomial=c(c(j,Mt),(function(t,i){t.ctrlSeq="\\binom",t.htmlTemplate='<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(</span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0</span><span>&1</span></span></span><span class="mq-paren mq-scaled">)</span></span>',t.textTemplate=["choose(",",",")"]}));b.choose=c(Tt,(function(t){t.createLeftOf=yt.prototype.createLeftOf}));b.editable=b.MathQuillMathField=c(j,(function(t,i){t.ctrlSeq="\\MathQuillMathField",t.htmlTemplate='<span class="mq-editable-field"><span class="mq-root-block">&0</span></span>',t.parser=function(){var t=this,n=Q.string,s=Q.regex,r=Q.succeed;return n("[").then(s(/^[a-z][a-z0-9]*/i)).skip(n("]")).map((function(i){t.name=i})).or(r()).then(i.parser.call(t))},t.finalizeTree=function(){var t=y(this.ends[l],this.jQ,$());t.KIND_OF_MQ="MathField",t.editable=!0,t.createTextarea(),t.editablesTextareaEvents(),t.cursor.insAtRightEnd(t.root),L(t.root)},t.registerInnerField=function(t,i){t.push(t[this.name]=i(this.ends[l].controller))},t.latex=function(){return this.ends[l].latex()},t.text=function(){return this.ends[l].text()}}));var It=b.embed=c(B,(function(t,i){t.setOptions=function(t){function i(){return""}return this.text=t.text||i,this.htmlTemplate=t.htmlString||"",this.latex=t.latex||i,this},t.parser=function(){var t=this;return string=Q.string,regex=Q.regex,succeed=Q.succeed,string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then((function(i){return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map((function(n){return t.setOptions(C[i](n))}))}))}})),Dt=(w["\\"]=c(j,(function(t,i){t.ctrlSeq="\\",t.replaces=function(t){this._replacedFragment=t.disown(),this.isEmpty=function(){return!1}},t.htmlTemplate='<span class="mq-latex-command-input mq-non-leaf">\\<span>&0</span></span>',t.textTemplate=["\\"],t.createBlocks=function(){i.createBlocks.call(this),this.ends[l].focus=function(){return this.parent.jQ.addClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("mq-empty"),this},this.ends[l].blur=function(){return this.parent.jQ.removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("mq-empty"),this},this.ends[l].write=function(t,i){t.show().deleteSelection(),i.match(/[a-z]/i)?P(i).createLeftOf(t):(this.parent.renderCommand(t),"\\"===i&&this.isEmpty()||this.parent.parent.write(t,i))},this.ends[l].keystroke=function(t,n,s){return"Tab"===t||"Enter"===t||"Spacebar"===t?(this.parent.renderCommand(s.cursor),void n.preventDefault()):i.keystroke.apply(this,arguments)}},t.createLeftOf=function(t){if(i.createLeftOf.call(this,t),this._replacedFragment){var n=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove",(function(t){return p(t.target=n).trigger(t),!1})).insertBefore(this.jQ).add(this.jQ)}},t.latex=function(){return"\\"+this.ends[l].latex()+" "},t.renderCommand=function(t){this.jQ=this.jQ.last(),this.remove(),this[1]?t.insLeftOf(this[1]):t.insAtRightEnd(this.parent);var i=this.ends[l].latex();i||(i=" ");var n=b[i];n?(n=n(i),this._replacedFragment&&n.replaces(this._replacedFragment),n.createLeftOf(t)):((n=N()).replaces(i),n.createLeftOf(t),t.insRightOf(n),this._replacedFragment&&this._replacedFragment.remove())}})),E(1));for(var Et in Dt)!function(t,i){"function"==typeof i?(T[t]=function(){return O(),i.apply(this,arguments)},T[t].prototype=i.prototype):T[t]=i}(Et,Dt[Et])}()}}]);